(function(){var b={dataPath:"data/",dataBest:"best.dat",dataSolutions:"solution.%n.dat",answer:[],$solutions:document.getElementById("solutions"),$answer:document.getElementById("answer"),$last:document.getElementById("last"),$next:document.getElementById("next"),$quiz:document.getElementById("quiz"),$formula:document.getElementById("formula"),$solution:document.getElementById("solution"),getName:function(a){return b.dataSolutions.replace(/%n/,(a-1)/50|0)}},e=window.tchisla={getData:function(a,c){var d=
  new XMLHttpRequest;d.open("GET",b.dataPath+a,!0);d.onload=function(){200<=d.status&&400>d.status&&(console.log("file load success",a),b[a]=d.responseText,c(b[a]))};d.send()},parseData:function(a){a.split(/[\n\r]+/).forEach(function(a){if(a.match(/^(\d+)#(\d+) ([\u221a^!+\-*/\d\(\)]+)$/)){a=RegExp.$1;var d=RegExp.$2,f=RegExp.$3;b.answer[a]=b.answer[a]||[];b.answer[a][d]=f}})},preparePad:function(){b[b.dataBest].split(/[\n\r]+/).forEach(function(a,c){var d=document.createElement("tr"),f=document.createElement("td");
  f.setAttribute("class","row");f.innerText=c+1;d.appendChild(f);for(var e=0;8>=e;e++)f=document.createElement("td"),f.setAttribute("rel",c+1+"#"+(e+1)),f.innerText=parseInt(a[e],36),d.appendChild(f);b.$solutions.appendChild(d)})},showAnswer:function(a,c){b.$answer.style.display="block";b.$quiz.innerText=a+"#"+c;b.$solution.innerText=a+"="+b.answer[a][c]},render:function(){e.getData(b.dataBest,e.preparePad);b.$solutions.addEventListener("click",function(a){if(a=a.target.getAttribute("rel")){var c=a.split("#");
  a=+c[0];c=+c[1];b[b.getName(a)]||e.getData(b.getName(a),e.parseData);e.showAnswer(a,c)}});b.$answer.addEventListener("click",function(a){"last"!==a.target.id&&"next"!==a.target.id&&(b.$answer.style.display="none")})}};e.render()})();