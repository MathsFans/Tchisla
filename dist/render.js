(function(){var b={dataPath:"data/",dataBest:"best.dat",dataSolutions:"solution.%n.dat",answer:[],$solutions:document.getElementById("solutions"),$answer:document.getElementById("answer"),$last:document.getElementById("last"),$next:document.getElementById("next"),$quiz:document.getElementById("quiz"),$formula:document.getElementById("formula"),$solution:document.getElementById("solution"),getName:function(a){return b.dataSolutions.replace(/%n/,(a-1)/50|0)},getLatex:function(a){return"$$"+a.replace(/([a-z])/g,
    "#$1").replace(/#t/g,"\\times").replace(/#s/g,"\\sqrt").replace(/#l/g,"\\left").replace(/#r/g,"\\right").replace(/#f/g,"\\frac").replace(/#x/g,"\\textstyle")+"$$"}},e=window.tchisla={getData:function(a,d,e){var c=new XMLHttpRequest;c.open("GET",b.dataPath+a,e);c.onload=function(){200<=c.status&&400>c.status&&(console.log("file load success",a),b[a]=c.responseText,d(b[a]))};c.send()},parseData:function(a){a.split(/[\n\r]+/).forEach(function(a){a.match(/^\d+,\d+,[^,]+,[^,]+$/)&&(a=a.split(","),b.answer[a[0]]=
  b.answer[a[0]]||[],b.answer[a[0]][a[1]]=[a[2],a[3]])})},preparePad:function(){b[b.dataBest].split(/[\n\r]+/).forEach(function(a,d){var e=document.createElement("tr"),c=document.createElement("td");c.setAttribute("class","row");c.innerText=d+1;e.appendChild(c);for(var f=0;8>=f;f++)c=document.createElement("td"),c.setAttribute("rel",d+1+"#"+(f+1)),c.innerText=parseInt(a[f],36),e.appendChild(c);b.$solutions.appendChild(e)})},showAnswer:function(a,d){b.$answer.style.display="block";b.$quiz.innerText=
  a+"#"+d;b.$solution.innerText=a+"="+b.answer[a][d][0];MathJax&&(b.$formula.innerText=b.getLatex(b.answer[a][d][1]),MathJax.Hub.Queue(["Typeset",MathJax.Hub]))},render:function(){e.getData(b.dataBest,e.preparePad,!0);b.$solutions.addEventListener("click",function(a){if(a=a.target.getAttribute("rel")){var d=a.split("#");a=+d[0];d=+d[1];b[b.getName(a)]||e.getData(b.getName(a),e.parseData,!1);e.showAnswer(a,d)}});b.$answer.addEventListener("click",function(a){"last"!==a.target.id&&"next"!==a.target.id&&
(b.$answer.style.display="none")})}};e.render()})();